{% extends "base.html" %}

{% block title %}グループ{% endblock %}

{% block script %}
  <script>
  {% ifequal alert_code 1 %}

  {% endifequal %}
  </script>
{% endblock %}

{% block content %}
  <h1>グループ</h1>
  <div class="panel-group" id="accordion">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accodion" href="#collapse_body">
          新しいグループを作成
        </a>
      </h4>
    </div>
    <div id="collapse_body" class="panel-collapse collapse">
      <div class="panel-body">

        <div class="col-sm-offset-1 col-sm-10">
        {% ifequal alert_code 1 %}
          <div class="alert alert-info">
            {{ created_group.name }}が作成されました！
          </div>
        {% endifequal %}
        {% ifequal alert_code 2 %}
          <div class="alert alert-danger">
            空欄を埋めてください。
          </div>
        {% endifequal %}
        {% ifequal alert_code 3 %}
          <div class="alert alert-danger">
            すでに同じグループIDが使われています。
          </div>
        {% endifequal %}
        </div>
        <form class="form-horizontal" method="post" enctype="multipart/form-data" id="form">{% csrf_token %}
          <div class="form-group">
            <label class="col-sm-offset-1 col-sm-3" for="form_name">グループの名前</label>
            <div class="col-sm-7">
              <input class="form-control" type="text" name="group_name" id="form_name" placeholder="30文字">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-offset-1 col-sm-3" for="form_id">グループのID</label>
            <div class="col-sm-7">
              <input class="form-control" type="text" name="group_id" id="form_id" placeholder="半角英数字とアンダーバー 30文字">
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-4 col-sm-7">
              <input class="btn btn-primary" type="submit" id="submit" value="作成">
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  </div>
  <div class="col-sm-12">
    <h4>参加中のグループ一覧</h4>
    <table class="table">
    {% if invited_groups %}
      <tr><td colspan="3">招待されているグループ</td></tr>
      {% for group in invited_groups %}
        <tr>
          <td>{{ group.group_id }}</td>
          <td>{{ group.name }}</td>
          <td><a href="/group/?command=join&id={{ group.id }}">参加</a></td>
        </tr>
      {% endfor %}
      <tr><td colspan="3">参加中のグループ</td></tr>
    {% endif %}
    {% for group in groups %}
      <tr>
        <td>{{ group.group_id }}</td>
        <td colspan="2"><a href="/group/{{ group.group_id }}/">{{ group.name }}</a></td>
      </tr>
    {% endfor %}
    </table>
  </div>
  <div><a href="/home/">ホームへ</a></div>
  <div><a href="/logout/">ログアウト</a></div>
{% endblock %}