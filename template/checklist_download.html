{% extends "base.html" %}

{% block title %}{{ list.list_name }}を保存 | {% endblock %}

{% block style %}
  <style>
      .sorting-color{
          margin: 5px;
          float: left;
      }
      .select-color {
          margin: 4px;
      }
  </style>
{% endblock %}

{% block script %}
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script>
  color = ["{{ color.1 }}","{{ color.2 }}","{{ color.3 }}","{{ color.4 }}","{{ color.5 }}","{{ color.6 }}","{{ color.7 }}","{{ color.8 }}","{{ color.9 }}"];
  default_color = ["#{{ default_color.1 }}","#{{ default_color.2 }}","#{{ default_color.3 }}","#{{ default_color.4 }}","#{{ default_color.5 }}","#{{ default_color.6 }}","#{{ default_color.7 }}","#{{ default_color.8 }}","#{{ default_color.9 }}"];
  $(function() {
      $(".sorting-color, .select-color")
              .css("width", "32px")
              .css("height", "32px")
              .each(function(index, element) {
                if (color[index%9] != "") $(element).css("background-color", color[index%9]);
                else $(element).css("background-color", default_color[index%9]);
      });
      $("#sortable-color").sortable( {
          axis: "x",
          cursor: "move"
      });
      $("#submit").click(function() {
          $("#color-order").val($("#sortable-color").sortable("toArray"));
          $("form").submit();
      });
  });
</script>
{% endblock %}

{% block content %}
  <h3>{{ list.list_name }}を保存</h3>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">チェックリストの保存設定</h3>
    </div>
    <div class="panel-body">
      <form class="form-horizontal" method="post" id="form">{% csrf_token %}
        <div class="form-group">
          <label class="col-sm-offset-1 col-sm-3" for="form_id">メモの書式</label>
          <div class="col-sm-7">
            <input class="form-control" type="text" name="memo" id="form_id" maxlength="50" value="{memo}({username}), ">
            <p class="help-block">{memo}:メモ　{username}:メンバーの名前　{userid}:メンバーのID　\n:改行に置き換えられます</p>
          </div>
        </div>

        <div class="form-group">
          <h4 class="col-sm-offset-1 col-sm-10">複数人のメンバーが同じサークルを選択していた場合</h4>
        </div>

        <div class="form-group">
          <div class="col-sm-offset-1 col-sm-3">
            <label>
              <input type="radio" name="color_option" value="1" checked>
              優先された色を設定する
            </label>
          </div>
          <div class="col-sm-7">
            <div id="sortable-color">
              <div class="btn sorting-color" id="1"></div>
              <div class="btn sorting-color" id="2"></div>
              <div class="btn sorting-color" id="3"></div>
              <div class="btn sorting-color" id="4"></div>
              <div class="btn sorting-color" id="5"></div>
              <div class="btn sorting-color" id="6"></div>
              <div class="btn sorting-color" id="7"></div>
              <div class="btn sorting-color" id="8"></div>
              <div class="btn sorting-color" id="9"></div>
            </div>
          </div>
          <div class="col-sm-offset-4 col-sm-7">
            <p class="help-block">左が優先されます</p>
          </div>
          <input type="hidden" id="color-order" name="color_order">
        </div>

        <div class="form-group">
          <div class="col-sm-offset-1 col-sm-3">
            <label>
             <input type="radio" name="color_option" value="2">
              特定の色を設定する
            </label>
          </div>
          <div class="col-sm-7">
            <table><tbody>
            <tr>
              <td><label for="select_color_1"><div class="btn select-color"></div></label></td>
              <td><label for="select_color_2"><div class="btn select-color"></div></label></td>
              <td><label for="select_color_3"><div class="btn select-color"></div></label></td>
              <td><label for="select_color_4"><div class="btn select-color"></div></label></td>
              <td><label for="select_color_5"><div class="btn select-color"></div></label></td>
              <td><label for="select_color_6"><div class="btn select-color"></div></label></td>
              <td><label for="select_color_7"><div class="btn select-color"></div></label></td>
              <td><label for="select_color_8"><div class="btn select-color"></div></label></td>
              <td><label for="select_color_9"><div class="btn select-color"></div></label></td>
            </tr>
            <tr>
              <td align="center"><input class="select-color-radio" id="select_color_1" type="radio" name="select_color" value="1" checked></td>
              <td align="center"><input class="select-color-radio" id="select_color_2" type="radio" name="select_color" value="2"></td>
              <td align="center"><input class="select-color-radio" id="select_color_3" type="radio" name="select_color" value="3"></td>
              <td align="center"><input class="select-color-radio" id="select_color_4" type="radio" name="select_color" value="4"></td>
              <td align="center"><input class="select-color-radio" id="select_color_5" type="radio" name="select_color" value="5"></td>
              <td align="center"><input class="select-color-radio" id="select_color_6" type="radio" name="select_color" value="6"></td>
              <td align="center"><input class="select-color-radio" id="select_color_7" type="radio" name="select_color" value="7"></td>
              <td align="center"><input class="select-color-radio" id="select_color_8" type="radio" name="select_color" value="8"></td>
              <td align="center"><input class="select-color-radio" id="select_color_9" type="radio" name="select_color" value="9"></td>
            </tr>
            </tbody></table>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-offset-1 col-sm-10">
            <input class="btn btn-primary pull-right" type="submit" id="submit" value="作成">
          </div>
        </div>
      </form>
    </div>
  </div>

{% endblock %}